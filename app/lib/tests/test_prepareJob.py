import os
import sys
sys.path.append('../../')
from prepareJob import makeJson

testDataDir = os.path.join(os.path.dirname(os.path.realpath(__file__)), 'test-data')

j = {
 "entries": [
  {
   "coils": [],
   "header": ">ref|XP_023931987.1| uncharacterized protein LOC106169985 [Lingula anatina]",
   "lcr": [],
   "length": 2466,
   "segments": {
    "assigned": [],
    "orphan": [
     [
      1,
      2466
     ]
    ],
    "unassigned": []
   },
   "sequence": "MRWSIELLNRDSGVLNGRRLTDTYIPGVKFGLQITATCGHPETAFTALKQTFPALVTTETQCAPNGTSVLPGILGFTERPNYDNELYHNEVPVVNIGMGSLLTSPGESVLHVAASYETRSKVVSEVLKQLNWKYIAVLYSNDATGRTRVDIMRDMLRRYDLCATLTETVDPGLSDQDGDVVIKKLISFGITGVLYVGSQDPLSVLFNAANRAARKNAKFNFQWILDDIIDEISALSNMPYTRGVLYIRDAVQDIYEFKDHWAGLDPTRPPAENPFFAEQYMTEETCRLPSAFHQLYISYISCPTVTKEERLRRYAKDPMRGFVNLAVDTVFTYAKALKEAQSTKCQTRGMCQDFMRMTHKEFASRFLKTVNFTYTMNERVQSLENRKVAFDKGYLSNPEVDVINIQVDKHVKVGDYRAGLLSLNTSLIRMYDARRTGRLAEVPKSLCQVSHCNCMSNFKSSDNVHSQQGDLIIGGVFSTRQKGSTLHTCRSIDSVQMQLVEAFKYAVLKVNRGEASVRLPPGIRLGTTIYDDCEDPYITKASQSALKSLDAIVAVSPNLPHMAVHDTLDGFNIPLISADPSLSLPREVEIQILLHILLHNDWRFVQVVYSDDSYGNASSREFKAEALKNGICVVQLVCFKNANAAEAASLLDKYPNTKVVIILLSRPHIVRMFLYSMRPRRGEYILIGNSVLGNSNTAVGGEDIVSTGTLAVNVQYPNNTDFFSHLNQLTAKSGSTLLFQKWYEALFNCTLDIKVNIAFQKCIQPYSTPITSARGFKLVPQHQLVIETVYSVAEGLERTLRRYCPGNIDRICPAFRNAPDKNLVVEREIKEVFQRKAIPATFKILQFKGKNEGYEEVGQFNEATKKLHLDDVGLSGISLSSCPGACYVCNYVYQHQDMVIIPGDILIAGIFNIHDKGSSPFTCGDIRNGPANIQGAKAVQYAIETIANGTTPVSLKGVKLGAVILDGCSSAARAGNLISSAYTGLLGLKQFRDIKVWMVEGADMLEEALPTLKVMGLPVITTTTTDSQLNQELQLYPKIYRSVPTSGHLVTGILQFLKEMGWNRVQVIHSTDTYGKNMADIFGRLAESAGVCVQQTHFISNKEESEKLLSVLLSSFDASVVVLFTSIEDISEGILTAKQKLTNDPLRLLIFLDDFSATSRISPSLLEGTVLFQIKELDLDNFSAYLNTQKFNGTPKNPWWDEYYARLFKCNLPGQHKYNMSCQNDSSLRVTDAPDYVHQPFIWGTIQAVYAFAQALDSLLNERCGADNDGLCGAFTTDHNITAALAAKLNGVSMDDGFGKVFKFTSENGTVNYMVHRYSNDVIEQIGTYRTFQRSLTLTNPTLKDYYGSVSARCDGLCSQTCFAKMKTAAKITKDKQGFVDGDVIFAGIFDVHQKSLQPLACGPLRDQNGFQLTEAFLYALNLVNTHRGQFQDILRGVKLGGILLDSCESPARAATLVDNIQSGRVSLSNSTVSKFIAAYIAGPTSASSRTVAEVLKPYGVPLLSYAATSTDLKNQLKYPTFLRTVPSDGKQARAILAVLKRFNIEYVQLVTSSGPYGDPMAKDLLELAGESGVCIAQHLVLRVTKTVSVKVAANSTLHALLKKPPRVAVLALEREHVRELLLAFNSSTNAKKQKFLFIGTDTWQRDLSVVAGLEDIAEGALTLGLETIDVQDYDTSLFLKHPNNYFSNPWFEEYYQWLHQCSLQGDGVFNKLCPLQTSQIPPTKYKQDKLVFYTIAAVHAMAHGLHSVLLDTCGAQYYGLCSNFTKSGDKYQQLLKSTKLANFTDITGRPFEFQDGESVRGYDLFRFGREALGGYLYSTIGDYYYETLTITSPDDNFDVPYSNCSHKHSCRECPTLGPKKTRIMISDKQTIKETSKMYVVAVMDVHQRGRNQFECGPLNVQSYYQLYALQIALRKGNADSLGLFVIDACSHSIRAVNDIYSFQGGCGIIGETAPIDLKVRPEMTMAYVIMGPDNVDAARAFLTSQEIPIVLPSVAPAVPNKYVFSTMPSDFNKAQLLISILQSLEWTHVMVVSSSSDRSQAATTAFFNAVKNKTNICIGKQIIMGENATEDDARDFVNNLNSTSDARVVVYFTDVKHTELLWSGSDLSQLVWIGFSHGENEAKENSDRVSGSITISPQTLDMRDISNTLVGSRPDITNDIPPDWFEEFWQLINGCKISSSKFVQKQFTRECGDSEQISSNEIRMDPSVSHTFLAGSILREAALTSECIPGDRNCFTKALHTTFVQVPDATTKFSFNNTLGFEIRNFQSKSKVHVKIGSWDTGAMHLSIDVRKYQGPIAKGGSNCTSENCPCLKNPVVTFNQSVTVATPSQNEYITTLPAVDSRFVSAIGIIVSMFIGIGVLLTLVLFVVFCVAYPNYKNIGTTLLGYYGLFGVLVIFLHTLAFIYYPSSTVCGFRRFLLGYSYAICFSAFLIKVLDIWRIGNDVVHLRHGSNTHDRHFWGCHMEA",
   "status": "pending",
   "tm": []
  }
 ],
 "id": "myid",
 "tools": {}
}

assert makeJson('myid', os.path.join(testDataDir, 'fasta-test.2.fa'), {}) == j